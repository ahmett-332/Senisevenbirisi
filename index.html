<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>günaydınnnn</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: monospace;
  }
  #msg {
    opacity: 0;
    margin-top: 20px;
    text-align: center;
    transition: opacity 0.6s ease;
  }
  #piece {
    cursor: grab;
    transition: transform 0.1s;
  }
</style>
</head>
<body>

<svg id="svg" width="320" height="260" viewBox="0 0 300 260"
     xmlns="http://www.w3.org/2000/svg">
  <!-- Eksik kalp -->
  <path id="heart" d="M150 230
           C-40 120 60 -40 150 60"
        fill="none" stroke="#ff4d6d" stroke-width="5"/>

  <!-- Sürüklenen parça -->
  <circle id="piece" cx="260" cy="40" r="10" fill="#ff4d6d"/>
</svg>

<div id="msg">
  <div style="color:#ff4d6d;">loading… %100</div>
  <div style="color:#333;margin-top:6px;">günaydınnnn</div>
</div>

<script>
const piece = document.getElementById("piece");
const heart = document.getElementById("heart");
const msg = document.getElementById("msg");
const svg = document.getElementById("svg");

let dragging = false;
let solved = false;

const target = { x: 150, y: 110 };
const snapRadius = 35;

piece.addEventListener("mousedown", () => dragging = true);

document.addEventListener("mouseup", () => {
  if (!dragging || solved) return;
  dragging = false;

  // Yanlış bırakma → geri itme
  piece.setAttribute("cx", 260);
  piece.setAttribute("cy", 40);
  piece.style.transform = "scale(0.9)";
  setTimeout(() => piece.style.transform = "scale(1)", 120);
});

document.addEventListener("mousemove", (e) => {
  if (!dragging || solved) return;

  const rect = svg.getBoundingClientRect();
  let x = e.clientX - rect.left;
  let y = e.clientY - rect.top;

  const dx = target.x - x;
  const dy = target.y - y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  // Manyetik çekim
  if (dist < snapRadius) {
    x += dx * 0.15;
    y += dy * 0.15;
  }

  piece.setAttribute("cx", x);
  piece.setAttribute("cy", y);

  // Doğru yer → kilit açılır
  if (dist < 10) {
    solved = true;
    heart.setAttribute(
      "d",
      "M150 230 C-40 120 60 -40 150 60 C240 -40 340 120 150 230"
    );
    piece.style.display = "none";

    // Mikro titreşim
    svg.style.transform = "translateX(-2px)";
    setTimeout(() => svg.style.transform = "translateX(2px)", 60);
    setTimeout(() => svg.style.transform = "translateX(0)", 120);

    msg.style.opacity = 1;
    dragging = false;
  }
});
</script>

</body>
</html>
